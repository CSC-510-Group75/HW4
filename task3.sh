cat titanic.csv | gawk -F, '$3 == 2 && $13 ~ /S/' | sed 's/female/F/' | sed 's/male/M/' | gawk -F\", '{print $2}' | gawk -F, '{ sum += $2; count++ } END { print sum / count}'